var ttCaptcha=new function(){var d=this.paramName="timetable_captcha",h="timetable_token",j="",i=null,e=true;function g(l){var n=" "+document.cookie,m=" "+l+"=",o=null,p=0,k=0;if(n.length>0){p=n.indexOf(m);if(p!=-1){p+=m.length;k=n.indexOf(";",p);if(k==-1){k=n.length}o=unescape(n.substring(p,k))}}return o}function b(k){var l=new Date();l.setTime(l.getTime()-1);document.cookie=k+"=; expires="+l.toGMTString()}this.onChanged=function(){};function a(k){return ttCaptcha.onChanged(k)}function f(){if(!i){i=$("input[name="+d+"]").keyup(a).change(a)}}function c(){return i.length!=0&&i.is(":visible")}this.isVisible=function(){f();return c()};this.check=function(){f();if(!c()){return true}return !!i.val()};this.clearKey=function(){f()};this.update=function(k){f();if(k){e=1}else{if(!j){var m=g(h);e=!m;e=0}else{e=0}}var l=$(".j-captcha-box");if(!e){l.hide()}else{var n=new Date();l.show().html(applyTempl("TmCaptchaBox",{param:n.getTime()}));i=false;f()}};this.setField=function(k){f()};this.setParam=function(l){f();if(i.length!=0&&i.is(":visible")){j=i.val()}var k=j;if(k){l[d]=k}}};